<html>
  <head>
    <meta charset="UTF-8">
    <title>Yelp a Route</title>
      <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0; background-color: #4F4F4F}
        #map-canvas { height: 500px }
        header {}
    </style>
  </head>
  <body>
    <div class="my_content">
    <p>
      <h1>Hello World</h1>
    </p>
    </div>
    <header>
      <form type="POST" class="search">
        <div class="search-boxes">
          Start: <input class="start-search-box" required>
          Destination <input class="destination-search-box" required>
          <button>Search</button>
        <div class="options">
          Food <input type="checkbox" class="food-checkbox" value="food">
          Gas <input type="checkbox"  class="gas-checkbox" value="gas_station">
          Shopping <input type="checkbox" class="shopping-checkbox" value="store">
        </div>
      </form>
    </header>
    <div id = "map-canvas"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=visualization,places&key=AIzaSyA7tOZNjgHPNh5a-zL1Mo9EFIysbwUU4s4&sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/routeboxer/src/RouteBoxer.js"></script>
    <script src = "polylineToBBox.js"></script>
    <script src = "bboxToPlacesReqArr.js"></script>
    <script src = "calcRoute.js"></script>
    <script src = "executePlacesReqArr.js"></script>

    <script>

    google.maps.event.addDomListener(window,'load',function() {

      var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8
      };

      var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);

      $(".search").on("submit", function(event){
        event.preventDefault();
        console.log($(".start-search-box").val());
        console.log($(".destination-search-box").val());

        calcRoute($(".start-search-box").val(), $(".destination-search-box").val(), function(res){
          console.log("inside calcRoute");
          var bboxArray = polylineToBBox(res.routes[0].overview_path,2);

          var placesReqArray = bboxToPlacesReqArr(bboxArray, {}, map);

          executePlacesReqArr(placesReqArray, function(results, pagination){

            console.log(results);

          });
        });
      });
    });

    </script>
  </body>
</html>
