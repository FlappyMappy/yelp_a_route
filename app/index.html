<html>
  <head>
    <meta charset="UTF-8">
    <title>Yelp a Route</title>
      <style type="text/css">
        html { height: 100% }
        body { height: 100%; margin: 0; padding: 0; background-color: #4F4F4F}
        #map-canvas { height: 500px }
        header {}
    </style>
  </head>
  <body>
    <div class="my-content">
    <p>
      <h1>Hello World</h1>
    </p>
    </div>
    <header>
      <form type="POST" class="search">
        <div class="search-boxes">
          Start: <input id="start" class="search-box" placeholder="Seattle, WA" autofocus required>
          Destination <input id="destination" class="search-box" placeholder="San Francisco, CA"required>
          <button>Search</button>
        <div class="options">
          Food <input type="checkbox" class="food-checkbox" value="food">
          Gas <input type="checkbox"  class="gas-checkbox" value="gas_station">
          Shopping <input type="checkbox" class="shopping-checkbox" value="store">
          Distance <input list="distances" id="dist" />
          <datalist id="distances"> <!--make this skinnier-->
            <option value="1">
            <option value="2" selected="selected">
            <option value="5">
            <option value="10">
          </datalist>
        </div>
      </form>
    </header>

    <sidebar id="list-view">
    </sidebar>

    <div id = "map-canvas"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?libraries=visualization,places&key=AIzaSyA7tOZNjgHPNh5a-zL1Mo9EFIysbwUU4s4&sensor=false"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/routeboxer/src/RouteBoxer.js"></script>
    <script src = "polylineToBBox.js"></script>
    <script src = "bboxToPlacesReqArr.js"></script>
    <script src = "calcRoute.js"></script>
    <script src = "executePlacesReqArr.js"></script>

    <script>

    google.maps.event.addDomListener(window,'load',function() {

      var mapOptions = {
          center: new google.maps.LatLng(-34.397, 150.644),
          zoom: 8
      };

      var map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
      var searchDistance = 2;
      var searchOptions = {
        type: []
      };

      //adds/removes types from the seach options object
      $("input[type=checkbox]").on("change", function(){
        var option = $(this).val();
        if($(this).is(":checked")){
          searchOptions.type.push(option);
        } else {
          var index = searchOptions.type.indexOf(option);
          searchOptions.type.splice(index,index+1);
        }
      });
      //changes search distance from default //DOES NOT WORK YET////
      $("#dist").on("change", function(){
        searchDistance = $(this).val();
        console.log(searchDistance);
      })

      //empties search box when clicked
      $(".search-box").on("focus", function(){
        $(this).val("");
      });

      //starts route search based on search boxes when submit button clicked
      $(".search").on("submit", function(event){
        //preventDefault stops a new page from loading
        event.preventDefault();
        console.log("start box contains: " + $("#start").val());
        console.log("destination box contains: " + $("#destination").val());

        // calcRoute($(".start-search-box").val(), $(".destination-search-box").val(), function(res){
        //   var bboxArray = polylineToBBox(res.routes[0].overview_path, searchDistance);

        //   var placesReqArray = bboxToPlacesReqArr(bboxArray, {}, map);

        //   executePlacesReqArr(placesReqArray, function(results, pagination){

        //     console.log(results);

        //   });
        // });
      });
    });

    </script>
  </body>
</html>
